[gd_scene load_steps=10 format=3 uid="uid://bsuoo7nvlkoo1"]

[ext_resource type="Script" uid="uid://boyue4x5mflv8" path="res://src/game/game.gd" id="1_3cfgd"]
[ext_resource type="PackedScene" uid="uid://815k8dovw0hv" path="res://src/elements/player.tscn" id="1_eewff"]
[ext_resource type="PackedScene" uid="uid://c3cnxh8nbx6g0" path="res://src/elements/wall.tscn" id="2_gh0ne"]
[ext_resource type="Script" uid="uid://ptr41c8wxmeu" path="res://src/scripts/background_scene.gd" id="3_5mrjc"]
[ext_resource type="PackedScene" uid="uid://dmf2qfbe5onmh" path="res://src/elements/asphalt.tscn" id="3_fyndt"]
[ext_resource type="Texture2D" uid="uid://c2cw0tp4jyg7l" path="res://assets/street_curb.png" id="5_kmhfv"]
[ext_resource type="Script" uid="uid://lp65b2vycvh4" path="res://src/scripts/enemy_controller.gd" id="7_rlaii"]
[ext_resource type="Script" uid="uid://bbwabw7mm06qk" path="res://src/scripts/score.gd" id="8_5mrjc"]

[sub_resource type="LabelSettings" id="LabelSettings_kf8lf"]
font_size = 24

[node name="Main" type="Node2D"]
script = ExtResource("1_3cfgd")

[node name="BackgroundScene" type="Node2D" parent="."]
script = ExtResource("3_5mrjc")

[node name="Asphalt" parent="BackgroundScene" instance=ExtResource("3_fyndt")]
position = Vector2(468, 640)

[node name="Left_Wall" parent="BackgroundScene" instance=ExtResource("2_gh0ne")]
position = Vector2(50, 642)

[node name="Sprite2D" type="Sprite2D" parent="BackgroundScene/Left_Wall"]
position = Vector2(46.5, 0)
scale = Vector2(0.35, 1)
texture = ExtResource("5_kmhfv")

[node name="Right_Wall" parent="BackgroundScene" instance=ExtResource("2_gh0ne")]
position = Vector2(849, 639)

[node name="Sprite2D" type="Sprite2D" parent="BackgroundScene/Right_Wall"]
position = Vector2(-47, 1)
scale = Vector2(0.3, 1)
texture = ExtResource("5_kmhfv")

[node name="Player" parent="." instance=ExtResource("1_eewff")]
position = Vector2(430, 1144)
maxSpeed = 800

[node name="EnemyController" type="Node2D" parent="."]
script = ExtResource("7_rlaii")

[node name="SpawnPoints" type="Node2D" parent="EnemyController"]

[node name="LeftMarker2D" type="Marker2D" parent="EnemyController/SpawnPoints"]
position = Vector2(213, -67)

[node name="CenterMarker2D" type="Marker2D" parent="EnemyController/SpawnPoints"]
position = Vector2(448, -67)

[node name="RightMarker2D" type="Marker2D" parent="EnemyController/SpawnPoints"]
position = Vector2(675, -67)

[node name="MobTimer" type="Timer" parent="EnemyController"]
wait_time = 2.8
autostart = true

[node name="Enemies" type="Node2D" parent="EnemyController"]

[node name="SpeedTimer" type="Timer" parent="."]
wait_time = 4.0
autostart = true

[node name="Score" type="Node2D" parent="."]
z_index = 19
script = ExtResource("8_5mrjc")

[node name="Control" type="Control" parent="Score"]
layout_mode = 3
anchors_preset = 0
offset_left = 32.0
offset_top = 32.0
offset_right = 287.0
offset_bottom = 96.0

[node name="ColorRect" type="ColorRect" parent="Score/Control"]
modulate = Color(1, 1, 1, 0.78431374)
layout_mode = 0
offset_right = 255.0
offset_bottom = 64.0
color = Color(0, 0, 0, 1)

[node name="Label" type="Label" parent="Score"]
offset_left = 47.0
offset_top = 41.0
offset_right = 272.0
offset_bottom = 88.0
text = "000000000000"
label_settings = SubResource("LabelSettings_kf8lf")
horizontal_alignment = 2
vertical_alignment = 1

[node name="ScoreTimer" type="Timer" parent="."]
wait_time = 0.05
autostart = true

[connection signal="hit" from="Player" to="." method="_on_player_hit"]
[connection signal="timeout" from="EnemyController/MobTimer" to="." method="_on_mob_timer_timeout"]
[connection signal="timeout" from="EnemyController/MobTimer" to="EnemyController" method="_on_mob_timer_timeout"]
[connection signal="timeout" from="SpeedTimer" to="." method="_on_speed_timer_timeout"]
[connection signal="timeout" from="ScoreTimer" to="Score" method="_on_score_timer_timeout"]
